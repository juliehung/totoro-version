<?xml version="1.0" encoding="utf-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">

    <changeSet id="20190802-Sql-2" author="Jim" context="!dev">
        <sql dbms="postgresql" splitStatements="true">
            CREATE VIEW delete_dev_ids AS
                SELECT id FROM jhi_user WHERE login like 'cdd%' OR login like 'asst%' OR login = 'user' OR login = 'cpadmin' OR login = 'd9999';

            DELETE FROM jhi_user_authority WHERE user_id IN (SELECT id FROM delete_dev_ids);

            DELETE FROM extend_user WHERE user_id IN (SELECT id FROM delete_dev_ids);

            DELETE FROM jhi_user WHERE id IN (SELECT id FROM delete_dev_ids);

            DROP VIEW IF EXISTS delete_dev_ids;
        </sql>
    </changeSet>
</databaseChangeLog>
